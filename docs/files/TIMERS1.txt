
ll = llcompat

timerSwitches = { true, true, true }
timerIntervals = { 1.5, 2, 2.75 }

local function getNewColor()
    return vector(math.random(), math.random(), math.random())
end

local function timerFace0()
    ll.SetColor(getNewColor(), 0)
end

local function timerFace1()
    ll.SetColor(getNewColor(), 1)
end

local function timerFace2()
    ll.SetColor(getNewColor(), 2)
end

local function switchTimer(face)
    local switch = timerSwitches[face + 1]
    local timerFunction = if face == 0 then timerFace0
                        else if face == 1 then timerFace1
                        else timerFace2
    if switch then
        LLTimers:off(timerFunction)
    else
        LLTimers:on(timerIntervals[face + 1], timerFunction)
    end
    timerSwitches[face + 1] = not switch
end

function LLEvents.touch_start(events)
    local face = ll.DetectedTouchFace(0)
    switchTimer(face)
end

math.randomseed()
LLTimers:on(timerIntervals[1], timerFace0)
LLTimers:on(timerIntervals[2], timerFace1)
LLTimers:on(timerIntervals[3], timerFace2)
