
ll = llcompat

timerSwitches = { true, true, true }
timerIntervals = { 1.5, 2, 2.75 }

local function getNewColor()
    return vector(math.random(), math.random(), math.random())
end

local function timerFace0()
    ll.SetColor(getNewColor(), 0)
end

local function timerFace1()
    ll.SetColor(getNewColor(), 1)
end

local function timerFace2()
    ll.SetColor(getNewColor(), 2)
end

local timerFunctions = { timerFace0, timerFace1, timerFace2 }

local function switchTimer(face)
    local switch = timerSwitches[face + 1]
    if switch then
        LLTimers:off(timerFunctions[face +1])
    else
        LLTimers:on(timerIntervals[face + 1], timerFunctions[face +1])
    end
    timerSwitches[face + 1] = not switch
end

local function timerFace0()
    ll.SetColor(getNewColor(), math.random(), 0)
end

local function timerFace1()
    ll.SetColor(getNewColor(), math.random(), 1)
end

local function timerFace2()
    ll.SetColor(getNewColor(), math.random(), 2)
end

function LLEvents.touch_start(events)
    local face = ll.DetectedTouchFace(0)
    switchTimer(face)
end

math.randomseed()
for i = 1, 3 do
    LLTimers:on(timerIntervals[i], timerFunctions[i])
end

